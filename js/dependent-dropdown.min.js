/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2013 - 2017
 * http://plugins.krajee.com/dependent-dropdown
 *
 * Author: Kartik Visweswaran
 * Copyright: 2014 - 2017, Kartik Visweswaran, Krajee.com
 *
 * Licensed under the BSD 3-Clause
 * https://github.com/kartik-v/dependent-dropdown/blob/master/LICENSE.md
 */!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";e.fn.depdropLocales={};var t,a,n,i;t=function(t,a){return null===t||void 0===t||0===t.length||a&&""===e.trim(t)},a=function(t,a,n,i,d){var o={value:a,text:n},r=a.toString();e.extend(!0,o,d||{}),null!==i&&i.length&&(r===i||t.attr("multiple")&&i instanceof Array&&e.inArray(r,i)>-1)&&(o.selected="selected"),e("<option/>",o).appendTo(t)},n=function(t,a){var n={};return 0===t.length?{}:(e.each(t,function(e,t){n[t]=a[e]}),n)},i=function(t,a){var n=this;n.$element=e(t),e.each(a,function(e,t){n[e]=t}),n.initData(),n.init()},i.prototype={constructor:i,initData:function(){var e=this,t=e.$element;e.initVal=t.val(),t.data("url",e.url).data("placeholder",e.placeholder).data("loading",e.loading).data("loadingClass",e.loadingClass).data("loadingText",e.loadingText).data("emptyMsg",e.emptyMsg).data("params",e.params)},init:function(){var t,a=this,n=a.depends,i=a.$element,d=n.length,o=i.find("option").length,r=a.initDepends||a.depends;for((0===o||i.find('option[value=""]').length===o)&&i.attr("disabled","disabled"),t=0;d>t;t++)a.listen(t,n,d);if(a.initialize===!0)for(t=0;t<r.length;t++)e("#"+r[t]).trigger("depdrop:change");i.trigger("depdrop:init")},parseDisabled:function(){var e=this;e.isDisabled&&e.$element.attr("disabled","disabled")},listen:function(a,n,i){var d,o,r=this,l=0;e("#"+n[a]).on("depdrop:change change select2:select krajeeselect2:cleared",function(a){var p=e(this);if(t(p.data("select2"))||"change"!==a.type){if(i>1&&1==r.$element.hasClass("dep-false"))for(var s=0;i>s;s++)$el=e("#"+n[s]),d=$el.attr("type"),o="checkbox"===d||"radio"===d?$el.prop("checked"):$el.val(),(o===r.loadingText||""===o)&&l++;return 0!=l?(l=0,void r.$element.html('<option id=""> '+r.emptyMsg+" </option>")):(l=0,void r.setDep(p,n,i))}}),r.parseDisabled()},setDep:function(t,a,n){for(var i,d,o=this,r={},l=0;n>l;l++)i=e("#"+a[l]),d=i.attr("type"),r[l]="checkbox"===d||"radio"===d?i.prop("checked"):i.val();o.processDep(o.$element,t.attr("id"),r,a)},processDep:function(i,d,o,r){var l,p,s,c,u,f=this,g=0,h={},m={},v=i.data("url"),y=n(r,o),b={},x=i.data("placeholder"),D=i.data("loading"),P=i.data("loadingClass"),C=i.data("loadingText"),$=i.data("emptyMsg"),j=i.data("params");if(m[f.parentParam]=o,!t(j)){for(s=0;s<j.length;s++)c=j[s],u=e("#"+j[s]).val(),h[s]=u,b[c]=u;m[f.otherParam]=h}m[f.allParam]=e.extend(!0,{},y,b),p={url:v,type:"post",data:m,dataType:"json",beforeSend:function(){i.trigger("depdrop:beforeChange",[d,e("#"+d).val(),f.initVal]),i.find("option[selected]").removeAttr("selected"),i.val("").attr("disabled","disabled").html(""),D&&i.removeClass(P).addClass(P).html('<option id="">'+C+"</option>")},success:function(n){l=t(n.selected)?f.initVal===!1?null:f.initVal:n.selected,t(n)?a(i,"",$,""):(i.html(f.getSelect(n.output,x,l)),i.find("optgroup").length>0&&i.find('option[value=""]').attr("disabled","disabled"),n.output&&i.removeAttr("disabled")),g=i.find("option").length,i.find('option[value=""]').length>0&&(g-=1),i.trigger("depdrop:change",[d,e("#"+d).val(),g,f.initVal]),f.parseDisabled()},error:function(){i.trigger("depdrop:error",[d,e("#"+d).val(),f.initVal])},complete:function(){D&&i.removeClass(P),i.trigger("depdrop:afterChange",[d,e("#"+d).val(),f.initVal])}},e.extend(!0,p,f.ajaxSettings),e.ajax(p)},getSelect:function(n,i,d){var o,r=this,l=e("<select>"),p=r.idParam,s=r.nameParam;return i!==!1&&a(l,"",i,d),t(n)&&(n={}),e.each(n,function(t,n){if(n[p])o=n[r.optionsParam]||{},a(l,n[p],n[s],d,o);else{var i=e("<optgroup>",{label:t});e.each(n,function(e,t){o=t[r.optionsParam]||{},a(i,t[p],t[s],d,o)}),i.appendTo(l)}}),l.html()}},e.fn.depdrop=function(a){var n=Array.apply(null,arguments),d=[];switch(n.shift(),this.each(function(){var o=e(this),r=o.data("depdrop"),l="object"==typeof a&&a,p=l.language||o.data("language")||"en",s={},c={};r||("en"===p||t(e.fn.depdropLocales[p])||(s=e.fn.depdropLocales[p]),e.extend(!0,c,e.fn.depdrop.defaults,e.fn.depdropLocales.en,s,l,o.data()),r=new i(this,c),o.data("depdrop",r)),"string"==typeof a&&d.push(r[a].apply(r,n))}),d.length){case 0:return this;case 1:return d[0];default:return d}},e.fn.depdrop.defaults={language:"en",depends:"",initDepends:"",url:"",params:{},ajaxSettings:{},initialize:!1,isDisabled:!1,loading:!0,loadingClass:"kv-loading",idParam:"id",nameParam:"name",optionsParam:"options",parentParam:"depdrop_parents",otherParam:"depdrop_params",allParam:"depdrop_all_params"},e.fn.depdropLocales.en={loadingText:"Loading ...",placeholder:"Select ...",emptyMsg:"No data found"},e.fn.depdrop.Constructor=i,e(function(){e("select.depdrop").depdrop()})});