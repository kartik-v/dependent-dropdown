!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){"use strict";a.fn.depdropLocales={};var b,c,d,e;b=function(b,c){return null===b||void 0===b||0===b.length||c&&""===a.trim(b)},c=function(b,c,d,e,f){var g={value:c,text:d};c.toString();a.extend(!0,g,f||{}),null!==e&&e.length&&e.indexOf(c.toString())!==-1&&(g.selected="selected"),a("<option/>",g).appendTo(b)},d=function(b,c){var d={};return 0===b.length?{}:(a.each(b,function(a,b){d[b]=c[a]}),d)},e=function(b,c){var d=this;d.$element=a(b),a.each(c,function(a,b){d[a]=b}),d.initData(),d.init()},e.prototype={constructor:e,initData:function(){var a=this,b=a.$element;a.initVal=b.val(),b.data("url",a.url).data("placeholder",a.placeholder).data("loading",a.loading).data("loadingClass",a.loadingClass).data("loadingText",a.loadingText).data("emptyMsg",a.emptyMsg).data("params",a.params)},init:function(){var c,b=this,d=b.depends,e=b.$element,f=d.length,g=e.find("option").length,h=b.initDepends||b.depends;for(0!==g&&e.find('option[value=""]').length!==g||e.attr("disabled","disabled"),c=0;c<f;c++)b.listen(c,d,f);if(b.initialize===!0)for(c=0;c<h.length;c++)a("#"+h[c]).trigger("depdrop.change");e.trigger("depdrop.init")},parseDisabled:function(){var a=this;a.isDisabled&&a.$element.attr("disabled","disabled")},listen:function(c,d,e){var f=this;a("#"+d[c]).on("depdrop.change change select2:select krajeeselect2:cleared",function(c){var g=a(this);(b(g.data("select2"))||"change"!==c.type)&&f.setDep(g,d,e)}),f.parseDisabled()},setDep:function(b,c,d){for(var f,g,e=this,h={},i=0;i<d;i++)f=a("#"+c[i]),g=f.attr("type"),h[i]="checkbox"===g||"radio"===g?f.prop("checked"):f.val();e.processDep(e.$element,b.attr("id"),h,c)},processDep:function(e,f,g,h){var j,m,n,s,t,i=this,k=0,l={},o={},p=e.data("url"),q=d(h,g),r={},u=e.data("placeholder"),v=e.data("loading"),w=e.data("loadingClass"),x=e.data("loadingText"),y=e.data("emptyMsg"),z=e.data("params");if(o[i.parentParam]=g,!b(z)){for(n=0;n<z.length;n++)s=z[n],t=a("#"+z[n]).val(),l[n]=t,r[s]=t;o[i.otherParam]=l}o[i.allParam]=a.extend(!0,{},q,r),m={url:p,type:"post",data:o,dataType:"json",beforeSend:function(){e.trigger("depdrop.beforeChange",[f,a("#"+f).val(),i.initVal]),e.find("option[selected]").removeAttr("selected"),e.val("").attr("disabled","disabled").html(""),v&&e.removeClass(w).addClass(w).html('<option id="">'+x+"</option>")},success:function(d){j=b(d.selected)?i.initVal===!1?null:i.initVal:d.selected,"string"==typeof j&&(j=j.split()),b(d)?c(e,"",y,""):(e.html(i.getSelect(d.output,u,j)),e.find("optgroup").length>0&&e.find('option[value=""]').attr("disabled","disabled"),d.output&&e.removeAttr("disabled")),k=e.find("option").length,e.find('option[value=""]').length>0&&(k-=1),e.trigger("depdrop.change",[f,a("#"+f).val(),k,i.initVal]),i.parseDisabled()},error:function(){e.trigger("depdrop.error",[f,a("#"+f).val(),i.initVal])},complete:function(){v&&e.removeClass(w),e.trigger("depdrop.afterChange",[f,a("#"+f).val(),i.initVal])}},a.extend(!0,m,i.ajaxSettings),a.ajax(m)},getSelect:function(d,e,f){var k,g=this,h=a("<select>"),i=g.idParam,j=g.nameParam;return e!==!1&&c(h,"",e,f),b(d)&&(d={}),a.each(d,function(b,d){if(d[i])k=d[g.optionsParam]||{},c(h,d[i],d[j],f,k);else{var e=a("<optgroup>",{label:b});a.each(d,function(a,b){k=b[g.optionsParam]||{},c(e,b[i],b[j],f,k)}),e.appendTo(h)}}),h.html()}},a.fn.depdrop=function(c){var d=Array.apply(null,arguments),f=[];switch(d.shift(),this.each(function(){var g=a(this),h=g.data("depdrop"),i="object"==typeof c&&c,j=i.language||g.data("language")||"en",k={},l={};h||("en"===j||b(a.fn.depdropLocales[j])||(k=a.fn.depdropLocales[j]),a.extend(!0,l,a.fn.depdrop.defaults,a.fn.depdropLocales.en,k,i,g.data()),h=new e(this,l),g.data("depdrop",h)),"string"==typeof c&&f.push(h[c].apply(h,d))}),f.length){case 0:return this;case 1:return f[0];default:return f}},a.fn.depdrop.defaults={language:"en",url:"",depends:"",initDepends:"",loading:!0,loadingClass:"kv-loading",initialize:!1,idParam:"id",nameParam:"name",optionsParam:"options",parentParam:"depdrop_parents",otherParam:"depdrop_params",allParam:"depdrop_all_params",params:{},isDisabled:!1,ajaxSettings:{}},a.fn.depdropLocales.en={loadingText:"Loading ...",placeholder:"Select ...",emptyMsg:"No data found"},a.fn.depdrop.Constructor=e,a(function(){a("select.depdrop").depdrop()})});